//============================================================================
// Name        : OnlineStockSpan.cpp
// Author      : Mohamed Dawoud
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
#include <stack>
#include <vector>

using namespace std;

class StockSpanner {
public:
	stack<pair<int,int>> st; // first represent the span number and second the price
	inline static int numberOfDays  ;
    StockSpanner() {
    	st = stack <pair<int,int>> ();
    }

    int next(int price) {

    	numberOfDays++;
    	int span=0;
    	while(st.empty() == false) {
    		pair<int,int> last = st.top();
    		if(price >  last.second) {
    			st.pop();
    		}
    		else {
    			span = numberOfDays-last.first;
    			st.push(make_pair(span, price));
    			break;
    		}
    	}

    	// edge case when the stack is empty
		if(st.empty() == false) {
			span = numberOfDays;
			st.push(make_pair(span, price));
		}

		return span;
    }
};


int main() {
	StockSpanner S = StockSpanner();
	cout << S.next(100) << endl; // is called and returns 1,
	cout << S.next(80) << endl;  // is called and returns 1,
	cout << S.next(60) << endl;  // is called and returns 1,
	cout << S.next(70) << endl;  // is called and returns 2,
	cout << S.next(60) << endl;  // is called and returns 1,
	cout << S.next(75) << endl;  // is called and returns 4,
	cout << S.next(85) << endl;  // is called and returns 6.
	return 0;
}
